EUSTAGGER LITE INSTALATZEKO
===========================

Eustagger Lite linux sistema ezberdinetan probatu dugu, batzuk zaharragoak 
(RHEL/Centos 6), beste batzuk berriagoak (Ubuntu 13.10). Jarraian dauden
azalpenak Ubuntu 12.04, 13.10, 14.04, 16.04 eta Fedora 18-20 bertsioekin funtzionatu beharko
lukete.

Eustagger Lite programak dependentzia hauek ditu:

pcre++ (0.9.5 bertsioarekin probatuta)
vislcg 3 (20130826 bertsioarekin probatuta)
SWI Prolog (5.10.5 eta 6.6.6 bertsioekin probatuta)
Foma (0.9.17 eta 0.9.18 bertsioekin probatuta)
Freeling (3.1 bertsioarekin probatuta)
Boost (1.53 - 1.58 bertsioekin probatuta)

Aldi berean programa/liburutegi horiek beraien dependentziak dituzte. Batzuk 
linux banaketaren pakete ofizialak jarriz instalatu ahal izango dira:

Ubuntu:
=======

        $ apt-get install subversion make cmake cpp libicu48 libicu-dev\
          autoconf bison flex zlib1g zlib1g-dev libpcre3 libpcre3-dev\
          libpcre++0 libpcre++-dev libboost-all-dev

Fedora:
=======

        $ yum install subversion make cmake gcc-c++ libicu libicu-devel\
          autoconf bison flex pl pl-devel zlib zlib-devel pcre pcre-devel\
          boost boost-devel


Fedoran pcre++ eskuz instalatu behar da. Horretarako 

        $ wget http://www.daemon.de/idisk/Apps/pcre++/pcre++-0.9.5.tar.gz
        edo bestela gure webgunetik:
        $ wget http://ixa2.si.ehu.es/eustagger/pcre++-0.9.5.tar.gz


        Deskonprimitu eta nahi duzun prefix-ean instalatu:

        $ tar -zxvf pcre++-0.9.5.tar.gz
        $ cd pcre++-0.9.5
        $ ./configure (64 bit-eko sistema batzuetan --with-pcre-lib=/usr/lib64 erabili)
        $ make
        $ make install

(lehenetsitako instalazio prefix-a /usr/local da, aldatzeko ./configure --prefix=path)


ESKUZ INSTALATU BEHARREKOAK:

foma:
=====

Deskargatu:

        $ wget https://foma.googlecode.com/files/foma-0.9.17.tar.gz
        edo bestela gure webgunetik:
        $ wget http://ixa2.si.ehu.es/eustagger/foma-0.9.17.tar.gz


Deskonprimitu, konpilatu eta instalatu:

        $ tar -zxvf foma-0.9.17.tar.gz
        $ cd foma-0.9.17
        $ make
        $ make install

(lehenetsitako instalazio prefix-a /usr/local da, aldatzeko editatu Makefile fitxategia)

vislcg3:
========

Deskargatu:

        $ wget http://beta.visl.sdu.dk/download/vislcg3/vislcg3-20130826.tar.gz
        edo bestela gure webgunetik:
        $ wget http://ixa2.si.ehu.es/eustagger/vislcg3-20130826.tar.gz

Deskonprimitu, konpilatu eta instalatu (cmake erabiltzen da):

        $ tar -zxvf vislcg3-20130826.tar.gz
        $ cd vislcg3-20130826
        $ ./cmake.sh
        $ make -j3
        $ make install

*.h eta *.hpp fitxategiak eskuz kopiatu behar dira erabakitako prefix-era:

        $ cp src/*.h src/*.hpp /gure_prefix_include (adib. /usr/local/include)

(prefix-a aldatzeko cmake.sh-ri  -DCMAKE_INSTALL_PREFIX=/path parametroa pasatzea dago)
(tcmalloc ez erabiltzeko -DUSE_TCMALLOC:BOOL=false pasa  cmake.sh-ri - Arazoak ematen ditu ubuntu 16.04n)
(boost liburutegia topatuko ez balu export BOOST_ROOT=/boost_kokapena)





Freeling 3.1
============

Programa Freeling 3.1rekin probatu dugu (3.0 bertsioak ez du balio).

http://devel.cpl.upc.edu/freeling/downloads/32 helbidetik deskargatu freeling-3.1.tar.gz
paketea. Edo bestela gure webgunetik deskargatu:

         $ wget http://ixa2.si.ehu.es/eustagger/freeling-3.1.tar.gz


Deskonprimitu, konpilatu eta instalatu:

        $ tar -zxvf freeling-3.1.tar.gz
        $ cd freeling-3.1
        ( Fedora/RedHat sistemetan hau egin behar da: $ export LDFLAGS=-lboost_system )
        $ ./configure --disable-warnings
        $ make
        $ make install

* Linux banaketarena ez den Boost instalazio jakin bat erabili nahi izanez gero,
configure egikaritu baino lehen hau egin:

$ export LDFLAGS="-L/nire_boost_instalazioa/lib -lboost_system"
$ export CPPFLAGS="-I/nire_boost_instalazioa/include"


* Freeling 3.1 konpilatzean honako errore hau eman dezake:

../../src/include/freeling/morfo/foma_FSM.h:1: error: stray '\357' in program
../../src/include/freeling/morfo/foma_FSM.h:1: error: stray '\273' in program
../../src/include/freeling/morfo/foma_FSM.h:1: error: stray '\277' in program

Hori ekiditzeko src/include/freeling/morfo/foma_FSM.h fitxategia editatu
eta hasierako komentario lerroak ezabatu.

swi-prolog:
============

ubuntu 14.04tik aurrera prolog-en 7.x.x bertsioak instalatzen dira apt bidez (sudo apt-get install swi-prolog), baina eustaggerrek 6.6.6 behar du gehienez. Horrenbestez, swipl-6.6.6 bertsioa deskargatu eta eskuz konpilatu beharko da:

$ wget http://www.swi-prolog.org/download/stable/src/pl-6.6.6.tar.gz

eta jarraitu hemengo argibideak: http://www.swi-prolog.org/build/ - argibide azkarrak:

$ cd src/
$ . /configure
$ make
$ sudo make install
$ cd ../packages
$ . /configure
$ make
$ sudo make install


ARAZOAK 1: arazoak ematen baditu instalazioan zehar baliteke libxpm-dev eta libarchive-dev paketeak instalatu behar izatea. Ubuntun:
    $ sudo apt-get install libxpm-dev libarchive-dev

ARAZOAK 2: Arazorik balego jpl konpilatzean aurrera egin instalazioarekin, ez da beharrezkoa. Adib:
    libjava.so not found
    libverify.so not found
    libjvm.so not found
   
    
ARAZOAK 3: ./configure exekutatzean baliteke --enable-shared aktibatu behar izatea. adib:
   $ ./configure --prefix=/usr/local/swipl-6.6.6/ --enable-shared



eustagger: 
==========

Eskuratu eustagger:

        $ svn co https://siuc05.si.ehu.es/svn/eustagger/trunk/eustagger
        edo bestela:
        $ wget http://ixa2.si.ehu.es/eustagger/eustagger_latest.tar.bz2

Konpilatu eta instalatzeko (goiko dependentziak ):

        $ cd eustagger
        $ autoconf
        $ ./configure

	Sistema eragileko swipl erabiltzen bada seguraski swipl-ren fitxategiak
	non dauden adierazi behar zaio 	"--with-swipl-include="  eta "--with-lib-include="
	parametroak erabiliz. Adibidez Ubuntun "--with-swipl-include=/usr/lib/swi-prolog/include"
	gehitu behar da...
	
	$ make
	$ make install

Lehenetsitako instalazio prefix-a /usr/local da. Aldatzeko --prefix aukera
erabili ./configure egikaritzean. Liburutegiren bat topatuko ez balu configure-ri
badago esatea non dagoen. Aukera guztiak ikusteko './configure --help'.

Badirudi linux banaketa bakoitzak swipl header-ak nahi duen lekuan instalatzen
dituela. Adibidez ubuntun  --with-swipl-include=/usr/lib/swi-prolog/include erabili
behar da header-ak topatzeko.


Azkenik, eustagger probatzeko ingurunean aldaketa hauek egin:

	$ export IXA_PREFIX=gure_prefix (/usr/local?)
	$ export LD_LIBRARY_PATH=gure_prefix/lib:$LD_LIBRARY_PATH

eustagger egikaritzeko prest gaude:

	$ eustagger_lite sarrera_fitx.txt

eustagger zerbitzu moduan botatzeko:

	$ eustagger_lite -p [portua]

eustagger bezeroa:
	$ eustagger_lite_client.pl [portua] [fitxategiaren_bide_osoa]



ARAZOAK 1:
-----------
Eustagger exekutatzean tcmalloc-ek errore hau eman dezake (ubuntu 16.04): 
eustagger_lite ~/test1.txt 
src/tcmalloc.cc:278] Attempt to free invalid pointer 0x8c94bd8 
Aborted (core dumped)

Arazo hau ematen badu, vislcg3-k erabiltzen duen libtcmalloc.so liburutegian dago arazoa. Konpontzeko 2 aukera daude:
  1) ubuntun ezabatu libgoogle-perftools-dev paketea :
     $sudo apt-get remove libgoogle-perftools-dev
  2) vislcg3 berriz konpilatu cmake.sh-ri -DUSE_TCMALLOC:BOOL=false parametroa pasata (Ez dago testeatuta)

ARAZOAK 2:
-----------
Eustagger exekutatzean liburutegiak ez baditu topatzen (libcg3.so edo libeustagger.so) esteka sinbolikoak sortu behar dira. Hau gerta daiteke vislcg3 eta eustagger /usr/local ez den beste direktorio batean instalatu direnean.

